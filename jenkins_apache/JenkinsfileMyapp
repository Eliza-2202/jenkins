pipeline {
    agent any

    stages {
        stage('Construir Imagen') {
            steps {
                script {
                    // Construir la imagen de Docker
                    sh 'docker build -t mi_imagen_local -f jenkins_apache/Dockerfile jenkins_apache'
                }
            }
        }

        stage('Ejecutar Contenedor') {
            steps {
                script {
                    // Ejecutar el contenedor
                    docker.run("mi_apache_imagen", "-p 8080:80")
                }
            }
        }
    }
}

